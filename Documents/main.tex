\documentclass[journal, a4paper]{IEEEtran}

\usepackage[utf8]{inputenc}

\usepackage[justification=centering]{caption}

\usepackage[left=18mm,right=18mm,top=17mm,bottom=18mm]{geometry}

\setlength{\columnsep}{7mm}

\usepackage{cleveref}

\usepackage[siunitx]{circuitikz}

\usepackage{siunitx}

\usepackage{float}

\usepackage{tikz}

\usetikzlibrary{shapes, arrows}

\usetikzlibrary{shapes.geometric, arrows}

\usetikzlibrary{fit}
\usepackage{multirow}
\usetikzlibrary{scopes}

\usepackage{cite}
\usepackage{graphicx}

\usepackage{url}
\tikzstyle{start} = [circle, draw, centered, fill = white!20, minimum width= 8pt, inner sep= 10pt]
\tikzstyle{decision} =[diamond, draw, fill=white!20, text width= 5em, text centered, node distance = 3cm, inner sep =0pt]
\tikzstyle{common} =[diamond, draw, fill=white!20, text width= 0.5em, text centered, node distance = 3cm, inner sep= 0pt]

\tikzstyle{operation} = [rectangle, draw, fill=white!20, text width = 5em, rounded corners, minimum height=4em ]

\tikzstyle{line} = [draw, -latex']

\tikzstyle{input} = [trapezium, draw, fill=white!20, text width= 4em, minimum height = 4em, trapezium  left angle =120, trapezium right angle = 60]

\setlength\parindent{0pt}

\begin{document}


	\title{ELEN 4020 Lab 3}

	\author{\small Uyanda Mphunga - 1168101 | Darren Blanckensee - 1147279 |
Ashraf Omar - 710435 | Amprayil Joel Oommen - 843463}

	\maketitle

\section{Introduction}
The purpose of this lab is to expose the students to the programming model of MapReduce. MapReduce makes use of underlying principles of parallelization, allowing for large datasets to be processed in a scalable and fault-tolerant way.\\

MapReduce is comprised of two key functions, namely a mapping function and reducing function. The map function operates on every member of an input list, returning as output two linked-pieces of data - a key and a value. These key-value pairs are then grouped according to the keys generated.\\

The output of the map function is then passed on to the reduce function. The reduce function takes in as an argument a key and all values associated with that key, to perform a function set out by the user.\\

For the purposes of this lab, students are required to develop two algorithms which make use of the MapReduce programming model, in order to perform matrix multiplication. Students have opted to make use of Python and the MrJob MapReduce framework, to implement the two algorithms. 

\section{Algorithm A}
\subsection{Map Function}
\noindent
In order to perform matrix multiplication, the algorithm is required to obtain element data for two matrices (say Matrix A and B) of appropriate size. Hence, when the algorithm is run, two input file names are supplied as arguments. Each input file, states the dimensions of a matrix in its first line. This is followed by every single matrix element's coordinate-position as well as value (where the information of each element is on its own newline).

The map function is designed to read every line of two inputted files. It first determines which input file it has read data from; this information is necessary, since specific logic is employed (based on the matrix that is being considered) when generating the key-value pairs. For more details about the logic employed, please refer to Figure~\ref{code} In addition, this information is necessary, so that the key-value pairs are associated with their correct matrices by the algorithm (either with Matrix A or Matrix B). The map function is completed, when a key-value pair is generated for each element of the input files. 

	\begin{figure}[hbtp!]
		\centering
		\includegraphics[scale = 1]{code.png}
		\caption{Excerpt code}
		\label {code}
	\end{figure}


\subsection{Reduce Function}
\noindent
Once the map function has generated all the key-value pairs for the two matrices, the reduce function is defined to create an unordered list of all the values for each matrix. These two lists are then sorted according to the key values. 

The matrix multiplication is then performed by: 

\section{Directed Graph Problem}

\noindent
A problem is presented in which an unweighted graph $G=(v,e)$ with $|v|$ nodes and $|e|$ edges (of length 1) must be represented in some data structure and then the nodes that are connected by paths of length 3 must be calculated. The most straightforward solution would be to represent the graph as a $v\times v$ matrix with $2\times|e|$ non-zero entries. The each row and each column represent a node and each entry determines connections between the two nodes. A one would mean a direct connection between the two nodes and a zero would mean there is either no connection or it is the same node. In order to see the nodes which are connected by length 2, we multiply the matrix by itself and the non-zero entries are connections of length 2 between the nodes. Therefore, the formula for finding connections of length $n$ between nodes in the graph represented by matrix $G$ is $G^n$. Therefore, to find the connections between nodes of length 3, we need to multiply the matrix by itself 3 times.

	%The result of Figure~\ref{code} is then multiplied with the array that

\section{Comparison}

% Please add the following required packages to your document preamble:
% \usepackage{multirow}
% Please add the following required packages to your document preamble:
% \usepackage{multirow}
\begin{table}[H]
\centering
\caption{Comparison of Different Methods}
\label{my-label}
\begin{tabular}{|l|l|l|l|l|}
\hline
\multicolumn{2}{|l|}{\multirow{2}{*}{}} & \multicolumn{3}{l|}{Array Sizes} \\ \cline{3-5}
\multicolumn{2}{|l|}{}                  & 128      & 1024      & 8192      \\ \hline
                     & No. of Threads   & \multicolumn{3}{l|}{Times}       \\ \hline
%Linear               & 1                &          &           &           \\ \hline
Algorithm A              & 4                &          &           &           \\ \hline
\multirow{4}{*}{}    & 8                &          &           &           \\ \cline{2-5}
                     & 16               &          &           &           \\ \cline{2-5}
                     & 64               &          &           &           \\ \cline{2-5}
                     & 128              &          &           &           \\ \hline
Algorithm B               & 4                &          &           &           \\ \hline
\multirow{4}{*}{}    & 8                &          &           &           \\ \cline{2-5}
                     & 16               &          &           &           \\ \cline{2-5}
                     & 64               &          &           &           \\ \cline{2-5}
                     & 128              &          &           &           \\ \hline
\end{tabular}
\end{table}

\section{Conclusion}

\end{document}